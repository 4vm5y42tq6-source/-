<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼æ”¾ç½®ã‚³ã‚¤ãƒ³RPG</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: sans-serif;
  text-align: center;
  background: #1b263b;
  color: #fff;
}

h1 {
  margin-top: 10px;
}

.box {
  background: #415a77;
  margin: 10px;
  padding: 10px;
  border-radius: 10px;
}

.monster {
  font-size: 50px;
}

button {
  font-size: 16px;
  padding: 10px;
  margin-top: 5px;
}

.slot {
  font-size: 40px;
  margin: 10px;
}
</style>
</head>

<body>

<h1>ğŸ² ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼æ”¾ç½®ã‚³ã‚¤ãƒ³RPG</h1>

<p>ğŸ’° ã‚³ã‚¤ãƒ³ï¼š<span id="coin">0</span></p>
<p>â± æ¯ç§’ï¼š<span id="power">0</span></p>

<div class="box">
  <div class="monster">ğŸŸ¢</div>
  <h2>ã‚¹ãƒ©ã‚¤ãƒ </h2>
  <p>æ•°ï¼š<span id="slime">0</span>ï¼ˆ+1/ç§’ï¼‰</p>
  <button onclick="buySlime()">ä»²é–“ã«ã™ã‚‹ï¼ˆ10ï¼‰</button>
</div>

<div class="box">
  <div class="monster">ğŸŸ¤</div>
  <h2>ã‚´ãƒ–ãƒªãƒ³</h2>
  <p>æ•°ï¼š<span id="goblin">0</span>ï¼ˆ+5/ç§’ï¼‰</p>
  <button onclick="buyGoblin()">ä»²é–“ã«ã™ã‚‹ï¼ˆ50ï¼‰</button>
</div>

<div class="box">
  <div class="monster">ğŸ”´</div>
  <h2>ãƒ‰ãƒ©ã‚´ãƒ³</h2>
  <p>æ•°ï¼š<span id="dragon">0</span>ï¼ˆ+20/ç§’ï¼‰</p>
  <button onclick="buyDragon()">ä»²é–“ã«ã™ã‚‹ï¼ˆ200ï¼‰</button>
</div>

<div class="box">
  <h2>ğŸ° ã‚¹ãƒ­ãƒƒãƒˆ</h2>
  <div class="slot">
    <span id="s1">â“</span>
    <span id="s2">â“</span>
    <span id="s3">â“</span>
  </div>
  <button onclick="spin()">å›ã™ï¼ˆ10ã‚³ã‚¤ãƒ³ï¼‰</button>
  <p id="result"></p>
</div>

<div class="box">
  <h2>â° 1æ™‚é–“ãƒ©ãƒ³ãƒ€ãƒ å¬å–š</h2>
  <p id="timer">èª­ã¿è¾¼ã¿ä¸­...</p>
  <button id="randomBtn" onclick="randomGet()">ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼GET</button>
</div>

<script>
let coin = 0;
let slime = 0;
let goblin = 0;
let dragon = 0;

// ä¿å­˜ã•ã‚ŒãŸæœ€çµ‚GETæ™‚åˆ»
let lastGet = localStorage.getItem("lastGet");
if (!lastGet) lastGet = 0;

const symbols = ["ğŸŸ¢","ğŸŸ¤","ğŸ”´"];

// =====================
// æ”¾ç½®åå…¥
// =====================
setInterval(() => {
  let power = slime * 1 + goblin * 5 + dragon * 20;
  coin += power;
  update();
  updateTimer();
}, 1000);

// =====================
// ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼è³¼å…¥
// =====================
function buySlime() {
  if (coin >= 10) { coin -= 10; slime++; update(); }
}
function buyGoblin() {
  if (coin >= 50) { coin -= 50; goblin++; update(); }
}
function buyDragon() {
  if (coin >= 200) { coin -= 200; dragon++; update(); }
}

// =====================
// ã‚¹ãƒ­ãƒƒãƒˆ
// =====================
function spin() {
  if (coin < 10) {
    document.getElementById("result").textContent = "ã‚³ã‚¤ãƒ³ãŒè¶³ã‚Šãªã„ï¼";
    return;
  }

  coin -= 10;

  let a = symbols[Math.floor(Math.random() * 3)];
  let b = symbols[Math.floor(Math.random() * 3)];
  let c = symbols[Math.floor(Math.random() * 3)];

  document.getElementById("s1").textContent = a;
  document.getElementById("s2").textContent = b;
  document.getElementById("s3").textContent = c;

  if (a === b && b === c) {
    let win = a === "ğŸ”´" ? 200 : a === "ğŸŸ¤" ? 50 : 20;
    coin += win;
    document.getElementById("result").textContent =
      "ğŸ‰ å¤§å½“ãŸã‚Šï¼ +" + win + "ã‚³ã‚¤ãƒ³";
  } else {
    document.getElementById("result").textContent = "ã¯ãšã‚Œâ€¦";
  }

  update();
}

// =====================
// 1æ™‚é–“ãƒ©ãƒ³ãƒ€ãƒ GET
// =====================
function randomGet() {
  const now = Date.now();
  if (now - lastGet < 3600000) return;

  const r = Math.random();

  if (r < 0.6) {
    slime++;
    alert("ğŸŸ¢ ã‚¹ãƒ©ã‚¤ãƒ ãŒä»²é–“ã«ãªã£ãŸï¼");
  } else if (r < 0.9) {
    goblin++;
    alert("ğŸŸ¤ ã‚´ãƒ–ãƒªãƒ³ãŒä»²é–“ã«ãªã£ãŸï¼");
  } else {
    dragon++;
    alert("ğŸ”´ ãƒ‰ãƒ©ã‚´ãƒ³ãŒä»²é–“ã«ãªã£ãŸï¼ï¼ï¼");
  }

  lastGet = now;
  localStorage.setItem("lastGet", lastGet);
  update();
}

// =====================
// æ®‹ã‚Šæ™‚é–“è¡¨ç¤º
// =====================
function updateTimer() {
  const now = Date.now();
  const diff = 3600000 - (now - lastGet);

  const timer = document.getElementById("timer");
  const btn = document.getElementById("randomBtn");

  if (diff <= 0) {
    timer.textContent = "ä»Šã™ãGETã§ãã‚‹ï¼";
    btn.disabled = false;
  } else {
    const min = Math.ceil(diff / 60000);
    timer.textContent = "æ¬¡ã®GETã¾ã§ " + min + " åˆ†";
    btn.disabled = true;
  }
}

// =====================
// è¡¨ç¤ºæ›´æ–°
// =====================
function update() {
  document.getElementById("coin").textContent = coin;
  document.getElementById("slime").textContent = slime;
  document.getElementById("goblin").textContent = goblin;
  document.getElementById("dragon").textContent = dragon;
  document.getElementById("power").textContent =
    slime * 1 + goblin * 5 + dragon * 20;
}
</script>

</body>
</html>
