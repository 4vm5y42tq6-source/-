<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The hours</title>

<style>
body {
  margin: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background: #f4f6f8;
  color: #333;
}

header {
  padding: 20px;
  text-align: center;
  font-size: 28px;
  font-weight: bold;
}

.tab {
  display: flex;
  gap: 8px;
  padding: 0 10px;
}
.tab button {
  flex: 1;
  padding: 12px;
  border-radius: 12px;
  border: none;
  background: #e5e7eb;
  font-size: 16px;
}
.tab button.active {
  background: #4b83b6;
  color: #fff;
}

.box {
  margin: 15px;
  background: #fff;
  border-radius: 16px;
  padding: 16px;
}

.big-btn {
  width: 100%;
  padding: 18px;
  font-size: 20px;
  border-radius: 16px;
  border: none;
  background: #4b83b6;
  color: white;
}

.red-btn {
  background: #d85a4a;
}

.green-btn {
  background: #5fb26a;
}

.slot {
  background: #333;
  color: red;
  font-size: 40px;
  text-align: center;
  padding: 20px;
  border-radius: 16px;
  margin-bottom: 10px;
}

.hidden {
  display: none;
}

small {
  color: #666;
}
</style>
</head>

<body>

<header>The hours</header>

<div class="box">
  <div>金貨: <span id="money">0</span></div>
  <div>収益: <span id="income">0</span> / 秒</div>
  <div>セット中: <span id="setMonster">なし</span></div>
  <div>累計ログイン日数: <span id="login">1</span> 日</div>
</div>

<div class="box">
  <button id="getBtn" class="big-btn">GETする</button>
  <div id="cooldown" style="text-align:center;margin-top:8px;"></div>
</div>

<div class="tab">
  <button onclick="showTab('warehouse')" class="active">倉庫</button>
  <button onclick="showTab('shop')">ショップ</button>
  <button onclick="showTab('book')">図鑑</button>
  <button onclick="showTab('slot')">スロット</button>
</div>

<!-- 倉庫 -->
<div id="warehouse" class="box">
  <h3>倉庫</h3>
  <div id="monsters"></div>
</div>

<!-- ショップ -->
<div id="shop" class="box hidden">
  <h3>ショップ</h3>
  <button onclick="buySlot()" class="big-btn">スロット解放（無料）</button>
</div>

<!-- 図鑑 -->
<div id="book" class="box hidden">
  <h3>遊び方</h3>
  <small>
    ・1時間に1回GETできる<br>
    ・モンスターをセットするとお金が増える<br>
    ・いらないモンスターは捨てよう
  </small>
</div>

<!-- スロット -->
<div id="slot" class="box hidden">
  <h3>運試しスロット</h3>
  <div class="slot" id="slotView">???</div>
  <div style="text-align:center">1回：100,000円</div>
  <button onclick="spin()" class="big-btn red-btn">レバーを叩く！</button>
</div>

<script>
let money = 0;
let income = 0;
let monsters = [];
let nextGet = 0;

function save() {
  localStorage.setItem("game", JSON.stringify({
    money, monsters, nextGet
  }));
}

function load() {
  const data = JSON.parse(localStorage.getItem("game"));
  if (!data) return;
  money = data.money;
  monsters = data.monsters;
  nextGet = data.nextGet;
}

function updateUI() {
  document.getElementById("money").textContent = Math.floor(money);
  document.getElementById("income").textContent = income;
  const list = document.getElementById("monsters");
  list.innerHTML = "";
  monsters.forEach((m, i) => {
    const d = document.createElement("div");
    d.innerHTML = `
      ${m.name}（${m.power}）
      <button onclick="setMonster(${i})">セット</button>
      <button onclick="removeMonster(${i})">捨てる</button>
    `;
    list.appendChild(d);
  });
}

function getMonster() {
  const now = Date.now();
  if (now < nextGet) return;
  nextGet = now + 3600000;
  const power = Math.floor(Math.random() * 100) + 1;
  monsters.push({ name: "モンスター", power });
  save();
  updateUI();
}

function setMonster(i) {
  income = monsters[i].power;
  document.getElementById("setMonster").textContent = monsters[i].name;
}

function removeMonster(i) {
  monsters.splice(i, 1);
  save();
  updateUI();
}

function showTab(id) {
  ["warehouse","shop","book","slot"].forEach(t=>{
    document.getElementById(t).classList.add("hidden");
  });
  document.getElementById(id).classList.remove("hidden");

  document.querySelectorAll(".tab button").forEach(b=>b.classList.remove("active"));
  event.target.classList.add("active");
}

function spin() {
  if (money < 100000) return alert("お金が足りない！");
  money -= 100000;
  const r = Math.random();
  if (r < 0.01) money += 50000000;
  else if (r < 0.05) money += 6300000;
  else if (r < 0.2) money += 1900000;
  else money += 800000;
  updateUI();
}

document.getElementById("getBtn").onclick = getMonster;

load();
updateUI();

setInterval(()=>{
  money += income;
  updateUI();
},1000);
</script>

</body>
</html>
